from enum import Enum, unique
from os.path import dirname
from pathlib import Path
from typing import Any, Dict

FIXTURE_DIR: Path = Path(dirname(__file__) + "/fixtures").resolve()


@unique
class Fixtures(str, Enum):
    corrupted_annotation = FIXTURE_DIR / "corrupted_annotation.json"
    food_nutritions = FIXTURE_DIR / "food_nutritions.json"


@unique
class SegmentationFormats(str, Enum):
    polygon = "polygon"
    uncompressed_rle = "uncompressed_rle"
    rle = "rle"


def generate_annotation_dict(
    segmentation_format: SegmentationFormats = SegmentationFormats.polygon,
) -> Dict[str, Any]:
    segmentations_by_format: Dict[SegmentationFormats, Any] = {
        SegmentationFormats.polygon: [
            [
                526.46,
                57.7,
                537.02,
                55.06,
                549.16,
                70.9,
                549.16,
                85.15,
                559.72,
                96.24,
                566.58,
                119.99,
                576.61,
                159.59,
                568.16,
                168.56,
                569.22,
                180.18,
                598.26,
                218.19,
                580.83,
                230.86,
                564.47,
                230.33,
                578.19,
                216.6,
                564.47,
                196.54,
                550.21,
                175.43,
                545.46,
                179.65,
                570.8,
                212.38,
                563.94,
                227.69,
                551.27,
                232.97,
                551.8,
                228.22,
                552.33,
                208.68,
                539.13,
                189.68,
                527.51,
                184.4,
                527.51,
                172.79,
                539.13,
                146.92,
                540.18,
                127.39,
                529.1,
                140.06,
                524.35,
                144.28,
                521.71,
                136.36,
                529.63,
                127.91,
                538.07,
                118.94,
                534.38,
                86.21,
                529.1,
                88.85,
                523.29,
                84.1,
                518.54,
                86.21,
                515.9,
                71.95,
                526.46,
                56.12,
            ]
        ],
        SegmentationFormats.uncompressed_rle: {
            "counts": [
                99015,
                6,
                352,
                8,
                350,
                9,
                322,
                11,
                15,
                11,
                321,
                38,
                321,
                38,
                321,
                37,
                322,
                36,
                323,
                34,
                326,
                32,
                328,
                30,
                329,
                30,
                329,
                31,
                328,
                31,
                326,
                33,
                325,
                33,
                325,
                23,
                3,
                7,
                27,
                5,
                293,
                24,
                35,
                8,
                292,
                23,
                34,
                10,
                4,
                12,
                276,
                24,
                24,
                20,
                2,
                14,
                275,
                24,
                24,
                20,
                2,
                14,
                275,
                25,
                19,
                25,
                1,
                14,
                275,
                26,
                18,
                40,
                275,
                26,
                5,
                4,
                9,
                40,
                276,
                26,
                2,
                7,
                8,
                39,
                278,
                34,
                8,
                38,
                281,
                32,
                8,
                38,
                282,
                31,
                8,
                39,
                280,
                37,
                2,
                41,
                278,
                71,
                3,
                7,
                277,
                72,
                2,
                8,
                277,
                72,
                1,
                10,
                276,
                83,
                276,
                83,
                276,
                83,
                276,
                61,
                3,
                19,
                276,
                51,
                13,
                19,
                277,
                50,
                12,
                20,
                278,
                15,
                7,
                27,
                11,
                21,
                280,
                4,
                17,
                26,
                10,
                22,
                264,
                6,
                41,
                16,
                9,
                22,
                264,
                8,
                41,
                15,
                9,
                20,
                265,
                10,
                43,
                11,
                10,
                19,
                265,
                12,
                42,
                11,
                10,
                19,
                260,
                17,
                42,
                11,
                10,
                18,
                257,
                21,
                43,
                9,
                11,
                6,
                1,
                12,
                255,
                22,
                64,
                4,
                2,
                12,
                254,
                23,
                68,
                15,
                231,
                11,
                10,
                24,
                61,
                24,
                228,
                13,
                9,
                24,
                58,
                28,
                226,
                15,
                8,
                23,
                37,
                14,
                7,
                29,
                225,
                20,
                4,
                22,
                37,
                51,
                225,
                21,
                3,
                20,
                39,
                51,
                225,
                41,
                42,
                51,
                225,
                40,
                43,
                51,
                225,
                39,
                45,
                28,
                3,
                18,
                226,
                31,
                1,
                5,
                47,
                26,
                5,
                16,
                228,
                27,
                67,
                15,
                6,
                16,
                229,
                25,
                89,
                16,
                1,
                5,
                224,
                24,
                89,
                7,
                1,
                15,
                225,
                23,
                30,
                6,
                52,
                7,
                2,
                14,
                224,
                26,
                25,
                10,
                52,
                5,
                4,
                13,
                224,
                30,
                20,
                12,
                2,
                22,
                36,
                13,
                224,
                31,
                17,
                40,
                33,
                14,
                224,
                32,
                9,
                48,
                31,
                14,
                225,
                12,
                1,
                19,
                8,
                49,
                30,
                14,
                226,
                12,
                1,
                19,
                7,
                50,
                29,
                14,
                227,
                12,
                2,
                18,
                7,
                50,
                29,
                9,
                233,
                10,
                3,
                18,
                7,
                53,
                6,
                6,
                14,
                9,
                234,
                8,
                5,
                17,
                7,
                55,
                3,
                17,
                3,
                10,
                236,
                4,
                8,
                16,
                7,
                56,
                2,
                18,
                1,
                11,
                249,
                14,
                9,
                37,
                2,
                48,
                251,
                11,
                11,
                21,
                2,
                12,
                1,
                50,
                255,
                5,
                19,
                4,
                14,
                7,
                4,
                49,
                280,
                6,
                24,
                47,
                281,
                8,
                23,
                47,
                281,
                8,
                24,
                46,
                281,
                8,
                24,
                46,
                281,
                7,
                25,
                47,
                280,
                8,
                28,
                44,
                279,
                8,
                28,
                45,
                278,
                8,
                24,
                29,
                3,
                17,
                278,
                8,
                17,
                35,
                8,
                13,
                278,
                8,
                17,
                33,
                11,
                12,
                278,
                8,
                17,
                14,
                3,
                14,
                18,
                7,
                278,
                8,
                17,
                13,
                4,
                14,
                19,
                4,
                281,
                6,
                18,
                13,
                4,
                4,
                315,
                4,
                20,
                1,
                3,
                5,
                3953,
                23,
                333,
                27,
                330,
                29,
                326,
                33,
                325,
                34,
                325,
                34,
                325,
                36,
                323,
                37,
                322,
                37,
                323,
                36,
                326,
                33,
                326,
                33,
                326,
                33,
                326,
                32,
                327,
                31,
                329,
                12,
                5,
                7,
                338,
                7,
                353,
                5,
                7197,
                10,
                4,
                24,
                320,
                40,
                318,
                42,
                316,
                44,
                315,
                44,
                315,
                44,
                315,
                44,
                315,
                44,
                315,
                44,
                315,
                44,
                316,
                42,
                318,
                40,
                320,
                37,
                322,
                34,
                325,
                27,
                332,
                18,
                342,
                15,
                345,
                12,
                349,
                8,
                75781,
            ],
            "size": [359, 640],
        },
        SegmentationFormats.rle: "",  # TODO: Add a valid RLE string
    }

    annotation_dict: Dict[str, Any] = {
        "id": 900100554743,
        "area": 6478,
        "iscrowd": 1,
        "image_id": 554743,
        "bbox": [275, 207, 153, 148],
        "category_id": 1,
        "segmentation": segmentations_by_format.get(segmentation_format),
    }

    return annotation_dict
